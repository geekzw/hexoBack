---
title: 设计模式之策略模式
date: 2017-09-12 10:26:12
tags: designMode
---
策略模式属于对象的行为模式。其用意是针对一组算法，将每一个算法封装到具有共同接口的独立的类中，从而使得它们可以相互替换。策略模式使得算法可以在不影响到客户端的情况下发生变化。
<!-- more -->
# 场景
每个人思想不同，可能看到一个东西，能联想到的东西也不同。比如看到这个策略模式，我就突然想到了小时候看的一个动画片《马丁的早晨》。大概讲的就是主人公马丁，每天早上起来都发现自己变成不一样的自己，有时候是猿人，有时候是机器人，有时候是超人，有时候是动物，等等。跟策略模式对应一下。首先马丁是一个人，具有人的基本属性，每天变化的部分是他的形态和要执行的动作。那么我们就可以把形态和动作从马丁身上抽出来，单独处理。形态和动作可以当做一个父类。每天不同的形体和动作，就可以用不同的子类来实现，这样，每天马丁只需要选择具体的子类，就可以表现出不同的形态和执行不同的动作。而不是创建多个不同的马丁本身。
#定义
策略模式属于对象的行为模式。其用意是针对一组算法，将每一个算法封装到具有共同接口的独立的类中，从而使得它们可以相互替换。策略模式使得算法可以在不影响到客户端的情况下发生变化。


----------
定义看着太专业，乍看上去看不太懂，但是如果你读完全文，理解了这个模式，再回过头来看定义，应该能够理解
# 角色

 - 客户端（执行策略的类）
 - 抽象策略类（所有策略的父类）
 - 具体策略类（具体策略的实现）
 


----------
UML图之类的就懒得话，代码可以很好的说明问题
# 源码
###形态动作抽象类
![客户端][1]
###具体形态动作类
![抽象策略类][2]
###客户端类
![具体策略类][3]


----------
代码很简单，应该能看明白。马丁就是客户端类，他每天都会变成不同的样子。这种形态可能会很多，针对这个动画片来说，马丁有52个早晨，那就需要52中策略，那么我们把52种形态抽离出来，然后抽象出公共部分作为父类，子类各自实现，这样耦合就很低，扩展也很强。这里其实也体现出了组合的优势。现在回头看看策略模式的定义，就大致看得懂了。

  [1]: http://7xslom.com1.z0.glb.clouddn.com/image/E318DB79-E492-4327-8C01-1E5229296772.png
  [2]: http://7xslom.com1.z0.glb.clouddn.com/image/02A15EB2-2D55-4325-886E-0BF3E4A1FAF6.png
  [3]: http://7xslom.com1.z0.glb.clouddn.com/image/7B55216C-F525-405E-B171-E9B3D301DDC8.png
