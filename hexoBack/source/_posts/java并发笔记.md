---
title: java并发笔记
date: 2016-12-27 14:11:59
categories: java
tags: java
---
java并发相关内容
<!-- more -->
## double 和 long的特殊性
当线程在没有同步的情况下读取变量时，可能会得到一个失效值，但至少这个值是由之前某个线程设置的值，而不是一个随机值，这种安全性保证也被称为最低安全性。但是有一个例外就是64位的double和long。非volatile类型的long和double变量，JVM允许64位的读操作或写操作分解为两个32为的操作。如果对该变量的读写操作不在同一个线程，就可能出问题
## volatile变量
当把变量声明为volatile类型后，编译器和运行时都会注意到这个变量是共享的，因此不会将该变量上的操作与其他内存操作仪器重排序。volatile变量不会被缓存在寄存器或者对其他处理器不可见的地方，因此在读取volatile类型的变量时总会返回最新写入的值。volatile变量是一种比sychronized关键字更轻量级的同步机制。volatile一般只作为对同步的状态校验。
